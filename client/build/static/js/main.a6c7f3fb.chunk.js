(this.webpackJsonpexpensetracker=this.webpackJsonpexpensetracker||[]).push([[0],{210:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(79),s=r.n(c),i=r(14),o=r(6),u=(r(89),r(2)),l=r(3),d=r.n(l),j=r(8),b=r(23),p=r.n(b),O=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("userInfo")),n={"Content-Type":"application/json",authorization:"Bearer ".concat(r.token)},e.prev=2,e.next=5,p.a.delete("/api/v1/transactions/".concat(t),{headers:n});case 5:return e.abrupt("return",{type:"DELETE_TRANSACTION",payload:t});case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",{type:"TRANSACTION_ERROR",payload:e.t0.response?e.t0.response.data.error:e.t0.res.data.error});case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,n,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("userInfo")),n={Authorization:"Bearer ".concat(r.token)},e.prev=2,e.next=5,p.a.post("/api/v1/transactions",t,{headers:n});case 5:return a=e.sent,c=a.data,e.abrupt("return",{type:"ADD_TRANSACTION",payload:c.data});case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{type:"TRANSACTION_ERROR",payload:e.t0.response?e.t0.response.data.error:e.t0.res.data.error});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),x=function(e){return{type:"EDIT_TRANSACTION",payload:e}},f=function(){var e=Object(j.a)(d.a.mark((function e(){var t,r,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("userInfo")),r={"Content-Type":"application/json",Authorization:"Bearer ".concat(t.token)},e.prev=2,e.next=5,p.a.get("/api/v1/transactions",{headers:r});case 5:return n=e.sent,a=n.data,e.abrupt("return",{type:"GET_TRANSACTION",payload:a.data});case 10:return e.prev=10,e.t0=e.catch(2),e.abrupt("return",{type:"TRANSACTION_ERROR",payload:e.t0.response?e.t0.response.data.error:e.t0.res.data.error});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={"Content-Type":"application/json"},e.prev=1,e.next=4,p.a.post("/api/v1/users/login",t,{headers:r});case 4:return n=e.sent,a=n.data,localStorage.setItem("userInfo",JSON.stringify(a)),e.abrupt("return",{type:"USER_LOGIN",payload:a});case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{type:"USER_ERROR",payload:e.t0.response.data.error});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(j.a)(d.a.mark((function e(t){var r,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={"Content-Type":"application/json"},e.prev=1,e.next=4,p.a.post("/api/v1/users",t,{headers:r});case 4:return n=e.sent,a=n.data,localStorage.setItem("userInfo",JSON.stringify(a)),e.abrupt("return",{type:"REGISTER_USER",payload:a});case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{type:"USER_ERROR",payload:e.t0.response.data.error});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,localStorage.removeItem("userInfo"),e.abrupt("return",{type:"LOGOUT_USER"});case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",{type:"USER_ERROR",payload:"logout Failed"});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),y=r(10),R=r(4),g=function(e,t){var r=t.type,n=t.payload;switch(r){case"GET_TRANSACTION":return Object(R.a)(Object(R.a)({},e),{},{loading:!1,transactions:n});case"DELETE_TRANSACTION":return Object(R.a)(Object(R.a)({},e),{},{transactions:e.transactions.filter((function(e){return e._id!==n}))});case"ADD_TRANSACTION":return Object(R.a)(Object(R.a)({},e),{},{transactions:[].concat(Object(y.a)(e.transactions),[n])});case"EDIT_TRANSACTION":return Object(R.a)(Object(R.a)({},e),{},{editId:n});case"TRANSACTION_ERROR":case"USER_ERROR":return Object(R.a)(Object(R.a)({},e),{},{loading:!1,error:n});case"USER_LOGIN":return Object(R.a)(Object(R.a)({},e),{},{user:Object(R.a)(Object(R.a)({},e.user),n)});case"REGISTER_USER":return Object(R.a)(Object(R.a)({},e),{},{user:n,isAuth:!0});case"LOGOUT_USER":return Object(R.a)(Object(R.a)({},e),{},{user:{name:"",token:""},transaction:[],editId:0,error:null});case"CLEAR_ERROR":return Object(R.a)(Object(R.a)({},e),{},{error:null});default:return e}},T=r(1),E={transactions:[],editId:0,error:null,loading:!0,user:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):{token:"",name:""}},S=Object(n.createContext)(E),w=function(e){var t=e.children,r=Object(n.useReducer)(g,E),a=Object(o.a)(r,2),c=a[0],s=a[1],i=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,O(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,m(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,x(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,f();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,h(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,v(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,N();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(T.jsx)(S.Provider,{value:{transactions:c.transactions,editId:c.editId,deleteTransaction:i,addTransaction:u,editTransaction:l,loading:c.loading,getTransactions:b,loginUser:p,logoutUser:R,registerUser:y,user:c.user,error:c.error,clearError:function(){s({type:"CLEAR_ERROR"})}},children:t})},I=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},A=function(){var e=Object(n.useContext)(S).transactions.map((function(e){return e.amount})).reduce((function(e,t){return e+t}),0).toFixed(2);return Object(T.jsxs)("div",{"data-testid":"balance",children:[Object(T.jsx)("h4",{"data-testid":"balance-title",children:"Your Balance"}),Object(T.jsx)("h1",{"data-testid":"balance-value",id:"balance",children:e>0?"$".concat(I(e)):"-$".concat(I(-e))})]})},C=function(){var e=Object(n.useContext)(S).transactions.map((function(e){return e.amount})),t=e.filter((function(e){return e>0})).reduce((function(e,t){return e+t}),0).toFixed(2),r=function(e){return e.filter((function(e){return e<-1})).reduce((function(e,t){return e+t}),0).toFixed(2)}(e);return Object(T.jsxs)("div",{className:"inc-exp-container",children:[Object(T.jsxs)("div",{children:[Object(T.jsx)("h4",{"data-testid":"income-header",children:"Income"}),Object(T.jsxs)("p",{className:"money plus","data-testid":"income-value",children:["$",I(t)]})]}),Object(T.jsxs)("div",{children:[Object(T.jsx)("h4",{children:"Expense"}),Object(T.jsxs)("p",{"data-testid":"expense-value",className:"money minus",children:["-$",I(Math.abs(r))]})]})]})},k=function(e){var t=e.transaction,r=t.amount,a=t.text,c=t._id,s=Object(n.useContext)(S),i=s.deleteTransaction,o=s.editTransaction,u=r<0?"-":"",l=r<0?"minus":"plus";return Object(T.jsxs)("li",{className:l,"data-testid":"".concat(c),children:[Object(T.jsx)("button",{className:"edit-btn",onClick:function(){return o(c)},children:"edit"}),a," ",Object(T.jsxs)("span",{children:[u,"$",I(Math.abs(r))]}),Object(T.jsx)("button",{"data-testid":"delete-btn",className:"delete-btn",onClick:function(){return i(c)},children:"x"})]})},_=function(){var e=Object(n.useContext)(S),t=e.transactions,r=e.getTransactions;return Object(n.useEffect)((function(){r()}),[]),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("h3",{children:"History"}),Object(T.jsx)("ul",{id:"list","data-testid":"transaction-list",className:"list",children:t.map((function(e){return Object(T.jsx)(k,{transaction:e},e._id)}))})]})},F=function(){var e=Object(n.useContext)(S),t=e.addTransaction,r=e.editTransaction,a=e.editId,c=e.deleteTransaction,s=Object(n.useContext)(S).transactions,i=Object(n.useState)(""),u=Object(o.a)(i,2),l=u[0],d=u[1],j=Object(n.useState)(0),b=Object(o.a)(j,2),p=b[0],O=b[1],m=Object(n.useState)(!1),x=Object(o.a)(m,2),f=x[0],h=x[1];Object(n.useEffect)((function(){var e=s.find((function(e){return e._id===a}));e&&(d(e.text),O(e.amount),c(a))}),[a,s,c]);return Object(T.jsx)(T.Fragment,{children:Object(T.jsxs)("div",{"data-testid":"add-transaction",children:[a?Object(T.jsx)("h3",{children:"Edit Transaction"}):Object(T.jsx)("h3",{children:"Add new Transaction"}),Object(T.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault();var n={id:a||Math.floor(1e6*Math.random()),text:l,amount:+p};l&&p?t(n):h(!0),setTimeout((function(){return h(!1)}),3e3),r(0),O(0),d("")},children:[Object(T.jsx)("div",{className:"error",style:{display:"".concat(f?"block":"none")},children:"Please fill in all fields"}),Object(T.jsxs)("div",{className:"form-control",children:[Object(T.jsx)("label",{htmlFor:"text",children:"Text"}),Object(T.jsx)("input",{value:l,type:"text",id:"text",placeholder:"Enter text...",onChange:function(e){return d(e.target.value)}})]}),Object(T.jsxs)("div",{className:"form-control",children:[Object(T.jsxs)("label",{htmlFor:"amount",children:["Amount ",Object(T.jsx)("br",{}),"(negative-expense,positive-income)"]}),Object(T.jsx)("input",{value:p,onChange:function(e){return O(e.target.value)},type:"number",id:"amount",placeholder:"Enter amount..."})]}),a?Object(T.jsx)("button",{className:"btn",children:"Submit transaction Edit"}):Object(T.jsx)("button",{className:"btn",children:"Add transaction"})]})]})})},U=function(){var e=Object(n.useContext)(S),t=e.logoutUser,r=e.user,a=Object(u.h)();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("h1",{"data-testid":"header",className:"header",children:"Expense Tracker"}),Object(T.jsxs)("div",{style:{display:"flex",alignItems:"baseline",gap:"1rem",marginTop:"10px"},children:[Object(T.jsxs)("h4",{children:["Hello,",null===r||void 0===r?void 0:r.name]}),Object(T.jsx)("div",{style:{width:"60%"},children:Object(T.jsx)("button",{className:"btn",onClick:function(e){e.preventDefault(),t(),a("/")},children:"Logout"})})]})]})},L=function(){return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(U,{}),Object(T.jsxs)("div",{className:"container",children:[Object(T.jsx)(A,{}),Object(T.jsx)(C,{}),Object(T.jsx)(_,{}),Object(T.jsx)(F,{})]})]})},q=function(e){var t=e.children,r=e.redirectPath,a=void 0===r?"/login":r;return Object(n.useContext)(S).user.token?t||Object(T.jsx)(u.b,{}):Object(T.jsx)(u.a,{to:a,replace:!0})},D=r(9),G=r(12),J=function(){var e=Object(n.useContext)(S),t=e.loginUser,r=e.user,a=Object(u.h)();return Object(n.useEffect)((function(){r.token&&a("/")}),[a,r.token]),Object(T.jsxs)("div",{className:"container",children:[Object(T.jsx)("h1",{style:{textAlign:"center"},children:"Login Form"}),Object(T.jsx)(D.d,{initialValues:{email:"",password:""},validationSchema:G.a({password:G.b().required("Required"),email:G.b().email("Invalid email address").required("Required")}),onSubmit:function(){var e=Object(j.a)(d.a.mark((function e(r,n){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.setSubmitting,e.next=3,t(r);case 3:c(!1),a("/");case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:Object(T.jsxs)(D.c,{children:[Object(T.jsx)("label",{htmlFor:"email",children:"Email Address"}),Object(T.jsx)(D.b,{name:"email",type:"text"}),Object(T.jsx)(D.a,{name:"email",className:"error",render:function(e){return Object(T.jsx)("div",{className:"error-form",children:e})}}),Object(T.jsx)("label",{htmlFor:"password",children:"Password"}),Object(T.jsx)(D.b,{name:"password",type:"password"}),Object(T.jsx)(D.a,{name:"password",className:"error",render:function(e){return Object(T.jsx)("div",{className:"error-form",children:e})}}),Object(T.jsx)("button",{type:"submit",className:"btn",children:"Login"})]})}),Object(T.jsxs)("div",{children:["Don't Have an Account? ",Object(T.jsx)(i.b,{to:"/register",children:"Register here"})]})]})},M=function(){var e=Object(n.useContext)(S),t=e.registerUser,r=e.user,a=Object(u.h)();return Object(n.useEffect)((function(){r.token&&a("/")}),[a,r.token]),Object(T.jsxs)("div",{className:"container",children:[Object(T.jsx)("h1",{style:{textAlign:"center"},children:"Register Form"}),Object(T.jsx)(D.d,{initialValues:{firstName:"",lastName:"",email:"",password:""},validationSchema:G.a({firstName:G.b().max(15,"Must be 15 characters or less").required("Required"),lastName:G.b().max(20,"Must be 20 characters or less").required("Required"),password:G.b().min(6,"Must be 6 characters or more").required("Required"),email:G.b().email("Invalid email address").required("Required")}),onSubmit:function(){var e=Object(j.a)(d.a.mark((function e(r,n){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.setSubmitting,e.next=3,t({email:r.email,name:"".concat(r.lastName+" "+r.firstName),password:r.password});case 3:c(!1),a("/");case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:Object(T.jsxs)(D.c,{children:[Object(T.jsx)("label",{htmlFor:"firstName",children:"First Name"}),Object(T.jsx)(D.b,{name:"firstName",type:"text"}),Object(T.jsx)(D.a,{name:"firstName",className:"error",render:function(e){return Object(T.jsx)("div",{className:"error-form",children:e})}}),Object(T.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),Object(T.jsx)(D.b,{name:"lastName",type:"text"}),Object(T.jsx)(D.a,{name:"lastName",className:"error",render:function(e){return Object(T.jsx)("div",{className:"error-form",children:e})}}),Object(T.jsx)("label",{htmlFor:"email",children:"Email Address"}),Object(T.jsx)(D.b,{name:"email",type:"text"}),Object(T.jsx)(D.a,{name:"email",className:"error",render:function(e){return Object(T.jsx)("div",{className:"error-form",children:e})}}),Object(T.jsx)("label",{htmlFor:"lastName",children:"Password"}),Object(T.jsx)(D.b,{name:"password",type:"password"}),Object(T.jsx)(D.a,{name:"password",className:"error",render:function(e){return Object(T.jsx)("div",{className:"error-form",children:e})}}),Object(T.jsx)("button",{type:"submit",className:"btn",children:"Register"})]})}),Object(T.jsxs)("div",{children:["Already Have an Account? ",Object(T.jsx)(i.b,{to:"/login",children:"Login here"})]})]})},B=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),r=t[0],a=t[1],c=Object(n.useContext)(S),s=c.error,i=c.clearError;return Object(n.useEffect)((function(){return s&&a(!0),setTimeout((function(){a(!1),i()}),5e3),function(){return clearTimeout()}}),[s,i]),Object(T.jsxs)(T.Fragment,{children:[r?Object(T.jsx)("div",{className:"error",style:{textAlign:"center"},children:s}):null,Object(T.jsxs)(u.e,{children:[Object(T.jsx)(u.c,{element:Object(T.jsx)(q,{}),children:Object(T.jsx)(u.c,{path:"/",element:Object(T.jsx)(L,{})})}),Object(T.jsx)(u.c,{path:"/login",element:Object(T.jsx)(J,{})}),Object(T.jsx)(u.c,{path:"/register",element:Object(T.jsx)(M,{})}),Object(T.jsx)(u.c,{path:"*",element:Object(T.jsx)("div",{children:"Page Not Found"})})]})]})};s.a.render(Object(T.jsx)(a.a.StrictMode,{children:Object(T.jsx)(w,{children:Object(T.jsx)(i.a,{children:Object(T.jsx)(B,{})})})}),document.getElementById("root"))},89:function(e,t,r){}},[[210,1,2]]]);
//# sourceMappingURL=main.a6c7f3fb.chunk.js.map