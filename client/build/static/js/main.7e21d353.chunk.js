(this.webpackJsonpexpensetracker=this.webpackJsonpexpensetracker||[]).push([[0],{26:function(t,e,n){},46:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),c=n(19),s=n.n(c),i=n(0),o=function(){return Object(i.jsx)("h1",{"data-testid":"header",className:"header",children:"Expense Tracker"})},u=(n(26),n(2)),d=n.n(u),l=n(5),j=n(6),b=n(9),p=n.n(b),O=function(){var t=Object(l.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.delete("/api/v1/transactions/".concat(e));case 3:return t.abrupt("return",{type:"DELETE_TRANSACTION",payload:e});case 6:return t.prev=6,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return",{type:"TRANSACTION_ERROR",payload:t.t0.res.data.error});case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(l.a)(d.a.mark((function t(e){var n,a,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={"Content-Type":"application/json"},t.prev=1,t.next=4,p.a.post("/api/v1/transactions",e,n);case 4:return a=t.sent,r=a.data,t.abrupt("return",{type:"ADD_TRANSACTION",payload:r.data});case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",{type:"TRANSACTION_ERROR",payload:t.t0.res.data.error});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),x=function(t){return{type:"EDIT_TRANSACTION",payload:t}},h=function(){var t=Object(l.a)(d.a.mark((function t(){var e,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.a.get("/api/v1/transactions");case 3:return e=t.sent,n=e.data,t.abrupt("return",{type:"GET_TRANSACTION",payload:n.data});case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",{type:"TRANSACTION_ERROR",payload:t.t0.res.data.error});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),m=n(20),v=n(4),T=function(t,e){var n=e.type,a=e.payload;switch(n){case"GET_TRANSACTION":return Object(v.a)(Object(v.a)({},t),{},{loading:!1,transactions:a});case"DELETE_TRANSACTION":return Object(v.a)(Object(v.a)({},t),{},{transactions:t.transactions.filter((function(t){return t._id!==a}))});case"ADD_TRANSACTION":return Object(v.a)(Object(v.a)({},t),{},{transactions:[].concat(Object(m.a)(t.transactions),[a])});case"EDIT_TRANSACTION":return Object(v.a)(Object(v.a)({},t),{},{editId:a});case"TRANSACTION_ERROR":return Object(v.a)(Object(v.a)({},t),{},{loading:!1,error:a});default:return t}},N={transactions:[],editId:0,error:null,loading:!0},y=Object(a.createContext)(N),A=function(t){var e=t.children,n=Object(a.useReducer)(T,N),r=Object(j.a)(n,2),c=r[0],s=r[1],o=function(){var t=Object(l.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=s,t.next=3,O(e);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),u=function(){var t=Object(l.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=s,t.next=3,f(e);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(){var t=Object(l.a)(d.a.mark((function t(e){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=s,t.next=3,x(e);case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(l.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=s,t.next=3,h();case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(i.jsx)(y.Provider,{value:{transactions:c.transactions,editId:c.editId,deleteTransaction:o,addTransaction:u,editTransaction:b,loading:c.loading,getTransactions:p},children:e})},R=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},C=function(){var t=Object(a.useContext)(y).transactions.map((function(t){return t.amount})).reduce((function(t,e){return t+e}),0).toFixed(2);return Object(i.jsxs)("div",{"data-testid":"balance",children:[Object(i.jsx)("h4",{"data-testid":"balance-title",children:"Your Balance"}),Object(i.jsx)("h1",{"data-testid":"balance-value",id:"balance",children:t>0?"$".concat(R(t)):"-$".concat(R(-t))})]})},E=function(){var t=Object(a.useContext)(y).transactions.map((function(t){return t.amount})),e=t.filter((function(t){return t>0})).reduce((function(t,e){return t+e}),0).toFixed(2),n=function(t){return t.filter((function(t){return t<-1})).reduce((function(t,e){return t+e}),0).toFixed(2)}(t);return Object(i.jsxs)("div",{className:"inc-exp-container",children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("h4",{"data-testid":"income-header",children:"Income"}),Object(i.jsxs)("p",{className:"money plus","data-testid":"income-value",children:["$",R(e)]})]}),Object(i.jsxs)("div",{children:[Object(i.jsx)("h4",{children:"Expense"}),Object(i.jsxs)("p",{"data-testid":"expense-value",className:"money minus",children:["-$",R(Math.abs(n))]})]})]})},I=function(t){var e=t.transaction,n=e.amount,r=e.text,c=e._id,s=Object(a.useContext)(y),o=s.deleteTransaction,u=s.editTransaction,d=n<0?"-":"",l=n<0?"minus":"plus";return Object(i.jsxs)("li",{className:l,"data-testid":"".concat(c),children:[Object(i.jsx)("button",{className:"edit-btn",onClick:function(){return u(c)},children:"edit"}),r," ",Object(i.jsxs)("span",{children:[d,"$",R(Math.abs(n))]}),Object(i.jsx)("button",{"data-testid":"delete-btn",className:"delete-btn",onClick:function(){return o(c)},children:"x"})]})},g=function(){var t=Object(a.useContext)(y),e=t.transactions,n=t.getTransactions;return Object(a.useEffect)((function(){n()}),[]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h3",{children:"History"}),Object(i.jsx)("ul",{id:"list","data-testid":"transaction-list",className:"list",children:e.map((function(t){return Object(i.jsx)(I,{transaction:t},t._id)}))})]})},S=function(){var t=Object(a.useContext)(y),e=t.addTransaction,n=t.editTransaction,r=t.editId,c=t.deleteTransaction,s=Object(a.useContext)(y).transactions,o=Object(a.useState)(""),u=Object(j.a)(o,2),d=u[0],l=u[1],b=Object(a.useState)(0),p=Object(j.a)(b,2),O=p[0],f=p[1],x=Object(a.useState)(!1),h=Object(j.a)(x,2),m=h[0],v=h[1];Object(a.useEffect)((function(){var t=s.find((function(t){return t._id===r}));t&&(l(t.text),f(t.amount),c(r))}),[r,s,c]);return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{"data-testid":"add-transaction",children:[r?Object(i.jsx)("h3",{children:"Edit Transaction"}):Object(i.jsx)("h3",{children:"Add new Transaction"}),Object(i.jsxs)("form",{className:"form",onSubmit:function(t){t.preventDefault();var a={id:r||Math.floor(1e6*Math.random()),text:d,amount:+O};d&&O?e(a):v(!0),setTimeout((function(){return v(!1)}),3e3),n(0),f(0),l("")},children:[Object(i.jsx)("div",{className:"error",style:{display:"".concat(m?"block":"none")},children:"Please fill in all fields"}),Object(i.jsxs)("div",{className:"form-control",children:[Object(i.jsx)("label",{htmlFor:"text",children:"Text"}),Object(i.jsx)("input",{value:d,type:"text",id:"text",placeholder:"Enter text...",onChange:function(t){return l(t.target.value)}})]}),Object(i.jsxs)("div",{className:"form-control",children:[Object(i.jsxs)("label",{htmlFor:"amount",children:["Amount ",Object(i.jsx)("br",{}),"(negative-expense,positive-income)"]}),Object(i.jsx)("input",{value:O,onChange:function(t){return f(t.target.value)},type:"number",id:"amount",placeholder:"Enter amount..."})]}),r?Object(i.jsx)("button",{className:"btn",children:"Submit transaction Edit"}):Object(i.jsx)("button",{className:"btn",children:"Add transaction"})]})]})})},w=function(){return Object(i.jsxs)(A,{children:[Object(i.jsx)(o,{}),Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)(C,{}),Object(i.jsx)(E,{}),Object(i.jsx)(g,{}),Object(i.jsx)(S,{})]})]})};s.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(w,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.7e21d353.chunk.js.map